import{u as k,Q as g,a as b,p as _}from"./useAuth-CD3_MGBu.js";import{Q as V,a as w}from"./QCard-CPNF3dSw.js";import{_ as C,r as l,o as Q,c as E,a as s,w as d,u as I,b as S,d as a,Q as x,n as y}from"./index-3jpsSy3B.js";const h={class:"flex flex-center"},L={class:"q-gutter-md"},N={__name:"Login",setup(B){const t=l(""),n=l(""),r=l(""),f=I(),c=l(!1),m=k(),i=l(!1);Q(()=>{c.value=!0});const v=async()=>{var u,o;i.value=!0;try{const e=await _("/login",{email:t.value,password:n.value}),p=e.token;console.log("Token recibido:",e),p?(m.token=e.token,console.log("Token guardado:",m.token),localStorage.setItem("auth",JSON.stringify({token:p})),f.replace("home")):console.log("Respuesta sin token:",e)}catch(e){e.response&&e.response.data.error==="Contraseña incorrecta"?r.value="La contraseña es incorrecta":(console.log("Error al iniciar sesión:",((o=(u=e.response)==null?void 0:u.data)==null?void 0:o.error)||e.message),r.value="")}i.value=!1};return(u,o)=>(S(),E("div",h,[s(V,{class:"my-card",bordered:""},{default:d(()=>[o[2]||(o[2]=a("div",{class:"header-login"},[a("p",null,"INVENTARIO JPL")],-1)),o[3]||(o[3]=a("div",{class:"img-login"},[a("img",{src:"https://cdn-icons-png.flaticon.com/128/10112/10112441.png",alt:"",class:"logo"})],-1)),o[4]||(o[4]=a("h6",null,"Iniciar Sesión",-1)),a("div",{class:y(["login-form",{"fade-in":c.value}])},[s(w,{class:"q-pa-none"},{default:d(()=>[a("div",L,[s(g,{outlined:"",modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=e=>t.value=e),label:"Email",type:"email",dense:"",autofocus:"",rules:[e=>e&&e.length>0||"El email es obligatorio",e=>/.+@.+\..+/.test(e)||"El email es inválido"]},null,8,["modelValue","rules"]),s(g,{outlined:"",modelValue:n.value,"onUpdate:modelValue":o[1]||(o[1]=e=>n.value=e),label:"Contraseña",type:"password",dense:"",rules:[e=>e&&e.length>0||"La contraseña es obligatoria"],error:r.value!=="","error-message":r.value},null,8,["modelValue","rules","error","error-message"])])]),_:1}),s(b,{id:"buttom"},{default:d(()=>[s(x,{onClick:v,loading:i.value,label:"Iniciar Sesión"},null,8,["loading"])]),_:1})],2)]),_:1})]))}},q=C(N,[["__scopeId","data-v-72dfba0e"]]);export{q as default};
