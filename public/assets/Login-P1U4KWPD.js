import{u as k,Q as g,a as b,p as Q}from"./useAuth-Dj6XO5Da.js";import{Q as V,a as _,b as w}from"./QPage-BzMxdbeg.js";import{_ as C,r as l,o as I,c as S,u as x,a as y,w as t,b as s,d as o,Q as E,n as L}from"./index-BEGkFgSe.js";const N={class:"q-gutter-md"},B={__name:"Login",setup(h){const n=l(""),i=l(""),r=l(""),f=x(),c=l(!1),m=k(),u=l(!1);I(()=>{c.value=!0});const v=async()=>{var d,a;u.value=!0;try{const e=await Q("/login",{email:n.value,password:i.value}),p=e.token;console.log("Token recibido:",e),p?(m.token=e.token,console.log("Token guardado:",m.token),localStorage.setItem("auth",JSON.stringify({token:p})),f.replace("/inicio")):console.log("Respuesta sin token:",e)}catch(e){e.response&&e.response.data.error==="Contraseña incorrecta"?r.value="La contraseña es incorrecta":(console.log("Error al iniciar sesión:",((a=(d=e.response)==null?void 0:d.data)==null?void 0:a.error)||e.message),r.value="")}u.value=!1};return(d,a)=>(y(),S(w,{class:"flex flex-center"},{default:t(()=>[s(_,{class:"my-card",bordered:""},{default:t(()=>[a[2]||(a[2]=o("div",{class:"header-login"},[o("p",null,"INVENTARIO JPL")],-1)),a[3]||(a[3]=o("div",{class:"img-login"},[o("img",{src:"https://cdn-icons-png.flaticon.com/128/10112/10112441.png",alt:"",class:"logo"})],-1)),a[4]||(a[4]=o("h6",null,"Iniciar Sesión",-1)),o("div",{class:L(["login-form",{"fade-in":c.value}])},[s(V,{class:"q-pa-none"},{default:t(()=>[o("div",N,[s(g,{outlined:"",modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=e=>n.value=e),label:"Email",type:"email",dense:"",autofocus:"",rules:[e=>e&&e.length>0||"El email es obligatorio",e=>/.+@.+\..+/.test(e)||"El email es inválido"]},null,8,["modelValue","rules"]),s(g,{outlined:"",modelValue:i.value,"onUpdate:modelValue":a[1]||(a[1]=e=>i.value=e),label:"Contraseña",type:"password",dense:"",rules:[e=>e&&e.length>0||"La contraseña es obligatoria"],error:r.value!=="","error-message":r.value},null,8,["modelValue","rules","error","error-message"])])]),_:1}),s(b,{id:"buttom"},{default:t(()=>[s(E,{onClick:v,loading:u.value,label:"Iniciar Sesión"},null,8,["loading"])]),_:1})],2)]),_:1})]),_:1}))}},q=C(B,[["__scopeId","data-v-4cafd414"]]);export{q as default};
